apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: argocd-server-ingress
  namespace: argocd
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    hajimari.io/appName: ArgoCD
    hajimari.io/icon: pencil
spec:
rules:
- host: &host argocd.kleinsorge.dev
  http:
    paths:
    - path: /
      pathType: Prefix
      backend:
        service:
          name: argocd-server
          port:
          number: 443
    - path: /
      pathType: Prefix
      backend:
        service:
          name: argogrpc
          port:
          number: 443
tls:
  - secretName: argocd-tls-certificate
    hosts:
      - *host
